# Spring boot fundamental

`@SpringBootApplication` annotation is a combination of
multiple annotations, such as the following:

- `@EnableAutoConfiguration`: enables automatic configuration based on dependencies. e.g. `spring-boot-starter-web`
  assumes that you're developing a web application and configure it accordingly.
- `@ComponentScan`: scan to find all components
- `@Configure`: defines a class as a source of bean definitions

## Json serialization infinite loop which happens on account of one-to-many relationship between the car and owner tables.

One solution: `@JsonIgnoreProperties({"hibernateLazyInitializer", "handler"})` + `@JsonIgnore`

GET `/api/v1/cars`

```diff
// ignore fields generated by Hibernate:
+ @JsonIgnoreProperties({"hibernateLazyInitializer", "handler"})
public class Owner {
    @Id
    @GeneratedValue(strategy = GenerationType.AUTO)
    private Long ownerId;

    // ...

    // 1 owner can have many cars
    @OneToMany(cascade = CascadeType.ALL, mappedBy = "owner")
    // mappedBy value is the field in Car class (private Owner `owner`)
+    @JsonIgnore
    private List<Car> cars;
}
```

This means when cars get owners, at the owners place, stop fetching cars. So the result is like

```json5
{
  "car": {
    "carId": 1,
    "owner": {
      "ownerId": 2
      // won't fetch car anymore
    }
  }
}
```

## spring-boot-starter-data-rest

This dep will search all repositories. No need to create service and controller.

At application.yml set basePath:

```yml
#  dep: spring-boot-starter-data-rest
data:
  rest:
    base-path: /api/v1
```

At Repository, add below: `@RepositoryRestResource` and `@Param`

```java

@RepositoryRestResource // spring-boot-starter-data-rest
public interface CarRepository extends JpaRepository<Car, Long> {
    // spring-boot-starter-data-rest needs @Param then, we can search by
    // http://localhost:8081/api/v1/cars/search/findByBrand?brand=Toyota
    List<Car> findByBrand(@Param("brand") String brand);
}
```